'use strict';

const MQTTEmitter = require('mqtt-emitter');


module.exports = function (mqttClient) {

  var events = new MQTTEmitter();

  events.onadd = function (topic) {
    mqttClient.subscribe(topic);
  };

  events.onremove = function (topic) {
    mqttClient.unsubscribe(topic);
  };

  mqttClient.on('message', function (topic, payload) {
    events.emit(topic, payload);
  });

  events.publish = mqttClient.publish.bind(mqttClient);

  return events;
};
